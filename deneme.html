<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Gelişmiş Header Düzeltici</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    textarea, pre { width: 100%; margin-top: 10px; }
    textarea { height: 200px; }
    button { margin-top: 10px; padding: 10px 20px; font-size: 16px; }
    pre { background: #f0f0f0; padding: 10px; white-space: pre-wrap; word-break: break-word; }
  </style>
</head>
<body>

<h2>Bozuk Header'ları Akıllı Şekilde Düzelt</h2>
<textarea id="inputArea" placeholder="Bozuk header'ları buraya yapıştır..."></textarea>
<button onclick="fixHeaders()">Dönüştür</button>
<h3>Düzenlenmiş Header'lar:</h3>
<pre id="outputArea"></pre>

<script>
function fixHeaders() {
  const lines = document.getElementById("inputArea").value.split(/\r?\n/);
  const result = [];
  let currentKey = "";
  let currentValue = "";

  for (let line of lines) {
    line = line.trim();
    if (!line) continue;

    // Eğer satır sadece "xxx:" şeklindeyse key'dir
    if (/^[^:]+:\s*$/.test(line)) {
      if (currentKey) {
        result.push(`${currentKey}: ${currentValue}`);
      }
      currentKey = line.replace(":", "").toLowerCase();
      currentValue = "";
    } else {
      // Satır bir key değil, value kısmı
      if (currentValue) {
        currentValue += " " + line;
      } else {
        currentValue = line;
      }
    }
  }

  // Son key-value çifti için
  if (currentKey) {
    result.push(`${currentKey}: ${currentValue}`);
  }

  document.getElementById("outputArea").textContent = result.join("\n");
}
</script>

</body>
</html>
